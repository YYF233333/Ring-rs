[target.x86_64-pc-windows-msvc]
linker = "rust-lld.exe"

[alias]
pack = "run -p asset-packer --"

# -------- Local quality gates (single-developer workflow) --------
# Fast, composable building blocks:
fmt-check = "fmt --all -- --check"
fmt-all = "fmt --all"
clippy-all = "clippy --workspace --all-targets"
clippy-deny = "clippy --workspace --all-targets -- -D warnings"
test-all = "test --workspace"
test-runtime = "test -p vn-runtime"
test-host-lib = "test -p host --lib"

# One-command local gate (cross-platform).
# Runs: fmt --check -> clippy -> tests
check-all = "run -p xtask -- check-all"

# -------- Coverage (local) --------
# Primary goal: vn-runtime coverage (close to 100%).
# Requires: cargo install cargo-llvm-cov && rustup component add llvm-tools-preview
cov-runtime = "run -p xtask -- cov-runtime"

# Secondary goal: workspace coverage (trend only; excludes tool crates).
cov-workspace = "run -p xtask -- cov-workspace"

# -------- Script checking --------
# Static analysis for VN scripts: syntax, labels, resource references.
script-check = "run -p xtask -- script-check"